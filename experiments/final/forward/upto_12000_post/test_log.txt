

# Freq
for c in 3 4 5 15 16 17; do cpufreq-set -c $c -f '3800MHz' || exit 10; done
+ for c in 3 4 5 15 16 17
+ cpufreq-set -c 3 -f 3800MHz
+ for c in 3 4 5 15 16 17
+ cpufreq-set -c 4 -f 3800MHz
+ for c in 3 4 5 15 16 17
+ cpufreq-set -c 5 -f 3800MHz
+ for c in 3 4 5 15 16 17
+ cpufreq-set -c 15 -f 3800MHz
+ for c in 3 4 5 15 16 17
+ cpufreq-set -c 16 -f 3800MHz
+ for c in 3 4 5 15 16 17
+ cpufreq-set -c 17 -f 3800MHz

# Prep
cd el15066/erigon/
+ cd el15066/erigon/

# GIT
sudo -u '#1000' git checkout -- common/globals.go
+ sudo -u '#1000' git checkout -- common/globals.go
sudo -u '#1000' git checkout forward
+ sudo -u '#1000' git checkout forward
Switched to branch 'forward'
Your branch is up to date with 'origin/forward'.

# Globals
cat common/globals.go.template |
  sed 's/%UPTO%/12000000/g' |
tee common/globals.go
+ cat common/globals.go.template
+ sed s/%UPTO%/12000000/g
+ tee common/globals.go

package common

const MAX_BLOCK = 12000000 - 1

# Disk
rm dbdir
+ rm dbdir
ln -s '/media/route/sx8200/' dbdir
+ ln -s /media/route/sx8200/ dbdir

# Make
sudo -u '#1000' make erigon
+ sudo -u '#1000' make erigon
Building Erigon
rm -f /home/route/el15066/erigon/build/bin/tg # Remove old binary to prevent confusion where users still use it because of the scripts
env GO111MODULE=on go build -trimpath -ldflags "-X github.com/ledgerwatch/erigon/params.GitCommit=7b84fde6f4077835867e46a47de0b7559a8262bd -X github.com/ledgerwatch/erigon/params.GitBranch=forward -X github.com/ledgerwatch/erigon/params.GitTag=v2021.08.05-6-g7b84fde6f" -o /home/route/el15066/erigon/build/bin/erigon ./cmd/erigon
Done building.
Run "/home/route/el15066/erigon/build/bin/erigon" to launch Erigon.

# Mkdir
mkdir '../experiments/final/forward/upto_12000_post/' || true
+ mkdir ../experiments/final/forward/upto_12000_post/

# Sleep
sleep 12
+ sleep 12

# Run
_T0=$(date +%s.%3N)
++ date +%s.%3N
+ _T0=1646028460.888
nice --10 taskset -c 3-5,16-17 ./build/bin/erigon --datadir dbdir/erigon/data/ --ethash.dagdir dbdir/erigon/ethash/ --nodiscover --port 30123 |& tee -i '../experiments/final/forward/upto_12000_post/erigon_log.txt'
+ nice --10 taskset -c 3-5,16-17 ./build/bin/erigon --datadir dbdir/erigon/data/ --ethash.dagdir dbdir/erigon/ethash/ --nodiscover --port 30123
+ tee -i ../experiments/final/forward/upto_12000_post/erigon_log.txt
[INFO] [02-28|06:07:40.956] Build info                               git_branch=forward git_tag=v2021.08.05-6-g7b84fde6f git_commit=7b84fde6f4077835867e46a47de0b7559a8262bd
[INFO] [02-28|06:07:40.956] Starting Erigon on Ethereum mainnet... 
[INFO] [02-28|06:07:40.957] Maximum peer count                       ETH=100 total=100
[INFO] [02-28|06:07:40.957] Set global gas cap                       cap=50000000
[INFO] [02-28|06:07:40.997] Opening Database                         label=chaindata path=dbdir/erigon/data/chaindata
[INFO] [02-28|06:07:40.999] database closed                          label=chaindata
[INFO] [02-28|06:07:40.999] Opening Database                         label=chaindata path=/home/route/el15066/erigon/dbdir/erigon/data/chaindata
[INFO] [02-28|06:07:41.001] Initialised chain configuration          config="{ChainID: 1 Homestead: 1150000 DAO: 1920000 DAOSupport: true EIP150: 2463000 EIP155: 2675000 EIP158: 2675000 Byzantium: 4370000 Constantinople: 7280000 Petersburg: 7280000 Istanbul: 9069000, Muir Glacier: 9200000, Berlin: 12244000, London: 12965000, Engine: ethash}"
[INFO] [02-28|06:07:41.001] Disk storage enabled for ethash DAGs     dir=dbdir/erigon/ethash count=2
[INFO] [02-28|06:07:41.001] Initialising Ethereum protocol           network=1
[INFO] [02-28|06:07:41.002] Effective                                prune="--prune="
[INFO] [02-28|06:07:41.002] Starting private RPC server              on=127.0.0.1:9090
[INFO] [02-28|06:07:42.336] Got interrupt, shutting down... 
[INFO] [02-28|06:07:42.338] Started P2P networking                   version=66 self="enode://cf90152aad373d1608af933850566e82f8ad78089ffe361b9f94664a081ba07596b6dbf4b38dfdde9f4a7470414f76c803b66ad56e4920db7bb09fa445d3c458@127.0.0.1:30123?discport=0" name=erigon/v2021.08.5-alpha-7b84fde6/linux-amd64/go1.16.14
[INFO] [02-28|06:07:42.339] Started P2P networking                   version=65 self="enode://cf90152aad373d1608af933850566e82f8ad78089ffe361b9f94664a081ba07596b6dbf4b38dfdde9f4a7470414f76c803b66ad56e4920db7bb09fa445d3c458@127.0.0.1:30304?discport=0" name=erigon/v2021.08.5-alpha-7b84fde6/linux-amd64/go1.16.14
[INFO] [02-28|06:07:42.339] Successfully update p2p node database    path=/home/route/el15066/erigon/dbdir/erigon/data/nodes/eth66 updated=0 deleted=1
[INFO] [02-28|06:07:42.339] database closed                          label=sentry
[INFO] [02-28|06:07:44.440] Successfully update p2p node database    path=/home/route/el15066/erigon/dbdir/erigon/data/nodes/eth65 updated=0 deleted=1
[INFO] [02-28|06:07:44.440] database closed                          label=sentry
[INFO] [02-28|06:07:44.443] database closed                          label=chaindata
_T1=$(date +%s.%3N)
++ date +%s.%3N
+ _T1=1646028464.451
_D=$(bc <<< "${_T1}-${_T0}")
++ bc
+ _D=3.563

# UN GIT
sudo -u '#1000' git checkout -- common/globals.go
+ sudo -u '#1000' git checkout -- common/globals.go
sudo -u '#1000' git checkout inline_uv
+ sudo -u '#1000' git checkout inline_uv
Your branch is up to date with 'origin/inline_uv'.
Switched to branch 'inline_uv'

# info.txt
printf 'UPTO 12000000\n'"WALL_TIME ${_D}\n" >'../experiments/final/forward/upto_12000_post/info.txt'
+ printf 'UPTO 12000000\nWALL_TIME 3.563\n'

# chown
chown 1000:1000 -R '../experiments/final/forward/upto_12000_post/'
+ chown 1000:1000 -R ../experiments/final/forward/upto_12000_post/
